---
import MainHead from '../components/common/MainHead.astro';
// import Footer from '../components/common/Footer.astro';
import Nav from '../components/common/Nav.astro';
import readingTime from 'reading-time';
import Draft from '../components/common/Draft.astro'

const { frontmatter, rawContent } = Astro.props;

const stats = readingTime(rawContent())

// console.log(stats)
---

<html lang="en" class="scroll-smooth">
  <head>
    <MainHead title={frontmatter.title} description={frontmatter.description} />
  </head>
  <body class="bg-matty-50 dark:bg-matty-900 selection:bg-blue-500/90 dark:selection:bg-blue-400/90 dark:selection:text-matty-900 selection:text-blue-50 overflow-x-hidden">
    <div class="z-[100] fixed w-screen "> 
      <Nav active="/blogs"/> 
    </div>
    <div class="flex flex-col min-h-screen">
      <img src={frontmatter.image} alt={frontmatter.title} class="object-cover pt-16 tbl:h-[32rem] lpt-lg:h-[38rem] min-w-full" />
      <div class="mx-auto prose prose-matty dark:prose-invert prose-custom mbl-md:pt-8 tbl:pt-20 flex-1 mbl-md:px-4 tbl:px-8 lpt:px-16 max-w-none mbl:w-full lpt:w-5/6 lpt-lg:w-4/6 tracking-wide">
          <h1 class=""> {frontmatter.title} </h1>
          <hr />
          <h3>Read Time</h3>
          <p>~ {stats.text}</p>
          <h3>Author{frontmatter.coauthors && 's' }</h3>
          <div class="tbl:text-base lpt:text-lg lpt-lg:text-xl font-medium grid grid-cols-1 tbl:grid-cols-2 lpt-lg:grid-cols-3 gap-4 justify-items-start">
            <div class="flex items-center gap-1">
              <img class="not-prose border-0 m-0 rounded-full w-4 h-4 tbl:w-6 tbl:h-6 lpt:w-10 lpt:h-10" src={frontmatter.author.profile} alt="profile"/>
              <a href={frontmatter.author.link} class="dark:text-matty-50"> {frontmatter.author.name} </a>
            </div>
            {frontmatter.coauthors && frontmatter.coauthors.map(({name, link, profile}) => (
              <div class="flex items-center gap-1">
                <img class="not-prose border-0 m-0 rounded-full w-4 h-4 tbl:w-6 tbl:h-6 lpt:w-10 lpt:h-10" src={profile} alt="profile"/>
                <a href={link} class="dark:text-matty-50">{name}</a>
              </div>
            ))}

          </div>
          <hr />
          <div>
            <slot />
          </div>
      </div>
    </div>
    <div class="z-[10] fixed bottom-0 w-screen flex flex-col h-screen"> 
      <div class="flex-1 backdrop-blur bg-white/80 dark:bg-matty-900/80"> </div>
      <div>
        <Draft draft={frontmatter.draft} />
      </div>
    </div>
  </body>
</html>
