---
import BaseLayout from '../layouts/BaseLayout.astro'
import Button from '../components/icons/Button.astro';
import { getCollection } from 'astro:content';

const works = await getCollection('works')
let filteredWorks = works.slice(0,4)
const sortedWorks = filteredWorks.sort((a,b) => {
    let c = new Date(a.data.date)
    let d = new Date(b.data.date)

    return c<d ? 1 : -1;
});
---

<BaseLayout>
    <main class="font-sans text-[#17191C] px-4 mbl-lg:px-10 tbl:px-10 lpt-lg:px-20 tbl:mt-0">
        <section class="relative flex gap-x-30 w-full min-h-[95vh] items-center">
            <h1 class="mt-16 flex-[7] font-semibold text-3xl mbl-md:text-4xl tbl:text-5xl leading-tight">
                Unveiling the Boundless World of Tech where I Dive 
                Deep into Machine Learning, Cloud Computing, 
                Web Development, and <a href="/about" class="text-l-pr-50 transition-all hover:underline decoration-custom-bg hover:bg-l-pr-50 hover:text-l-bg">More</a>. 
            </h1>
            <a href="#">
                <img src="/assets/9petal-3d.png" width="360rem" alt="9petal" class="flex-[3] z-[-100] hidden lg:block overflow-x-hidden">
            </a>
            <a href="#works" class="absolute bottom-0 flex items-center"> <span class="material-symbols-rounded animate-bounce">arrow_downward</span> Scroll Down</a>
        </section>
        <section id="works" class="my-10">
            <div>
                <h4 class="font-bold text-2xl mb-4">Works & Projects</h4>
                <span class="flex items-center text-lg gap-x-2 italic"><Button/> Learning from doing</span>
            </div>
            <div class="mt-10 max-w-5xl flex flex-col gap-y-8">
                {sortedWorks.map((work, i) => (
                    <a href={`/work/${work.slug}`} class="flex flex-col justify-center">
                        <div class="flex items-center gap-5">
                            <span class="text-sm"> 0{i+1} </span>
                            <div>
                                <h1 class="hover:underline text-4xl font-semibold mb-2">{work.data.title}</h1>
                                <p>{work.data.description}</p>
                            </div>
                        </div>
                    </a>
                ))}
            <hr>
            </div>
            <div class="mt-8">
                <div class="px-6 italic">There are more!</div>
                <a href="/works/1" class="flex items-center gap-4 font-bold text-3xl px-6 text-l-pr-50">
                    <span class="hover:underline "> view all works </span>
                    <span class="material-symbols-rounded">arrow_forward</span>
                </a>
            </div>
        </section>
    </main>
</BaseLayout>