---
import BaseLayout from '../layouts/BaseLayout.astro'
import Button from '../components/icons/Button.astro';
import { getCollection } from 'astro:content';

const works = await getCollection('works')
let filteredWorks = works.slice(0,4)
const sortedWorks = filteredWorks.sort((a,b) => {
    let c = new Date(a.data.date)
    let d = new Date(b.data.date)

    return c<d ? 1 : -1;
});
---

<BaseLayout>
    <main class="font-sans text-[#17191C] px-4 mbl-lg:px-10 tbl:px-10 lpt-lg:px-20 tbl:mt-0">
        <section class="justify-center relative flex gap-x-30 w-full min-h-[60vh] tbl:min-h-[95vh] items-center">
            <!-- <a href="#" class="z-[100]"> -->
            <div class="z-[100]">
                <img src="/assets/logo-gearlike.png" width="560rem" alt="9petal" class="flex-[3] block overflow-x-hidden">
            </div>
            <!-- </a> -->
            <div class="z-[1] absolute flex flex-row gap-10 w-full overflow-hidden whitespace-nowrap scrolling_text">
                <div class="flex flex-row gap-10 lg:text-5xl sm:text-4xl text-2xl font-bold text">
                    <span>Developer. Engineer.</span>
                    <span>Developer. Engineer.</span>
                    <span>Developer. Engineer.</span>
                </div>
                <div class="flex flex-row gap-10 lg:text-5xl sm:text-4xl text-2xl font-bold text">
                    <span>Developer. Engineer.</span>
                    <span>Developer. Engineer.</span>
                    <span>Developer. Engineer.</span>
                </div>
            </div>
            
            <a href="#works" class="absolute bottom-0 flex items-center"> <span class="material-symbols-rounded animate-bounce">arrow_downward</span> Scroll Down</a>
        </section>
        <section id="" class="my-10 pt-10">
        </section>
        <section id="works" class="my-10 pt-10">
            <div>
                <h4 class="font-bold text-2xl mb-4">Works & Projects</h4>
                <span class="flex items-center text-lg gap-x-2 italic"><Button/> Learning from doing</span>
            </div>
            <div class="mt-10 max-w-5xl flex flex-col gap-y-8">
                {sortedWorks.map((work, i) => (
                    <a href={`/work/${work.slug}`} class="flex flex-col justify-center">
                        <div class="flex items-center gap-5">
                            <span class="text-sm"> 0{i+1} </span>
                            <div>
                                <h1 class="hover:underline text-4xl font-semibold mb-2">{work.data.title}</h1>
                                <p>{work.data.description}</p>
                            </div>
                        </div>
                    </a>
                ))}
            <hr>
            </div>
            <div class="mt-8">
                <div class="px-6 italic">There are more!</div>
                <a href="/works/1" class="flex items-center gap-4 font-bold text-3xl px-6 text-l-pr-50">
                    <span class="hover:underline "> view all works </span>
                    <span class="material-symbols-rounded">arrow_forward</span>
                </a>
            </div>
        </section>
    </main>
</BaseLayout>

<style>
	@keyframes animate_text {
		from {
		transform: translate3d(0, 0, 0);
		}
		to {
		transform: translate3d(-100%, 0, 0);
		}
	}

	.text {
		animation: animate_text 30s linear infinite; /* The animation property */
	}
</style>