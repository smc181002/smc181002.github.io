---
import MainBody from '../layouts/main.astro'

import {parse} from '@ceol/medium-feed-parser';
import {extract} from '@extractus/feed-extractor';

// let blogs = import {extract} from '@extractus/feed-extractor';

// const url = 'https://smc181002.medium.com/feed';

const content = await parse('smc181002')
// console.log(content.rss.channel)

// const feed = await extract(url, {
//   getExtraEntryFields: (feedEntry) => {
//     const {
//       category
//     } = feedEntry
//     return {
//       category: category,
//     }
//   }
// })

const printDate = (date) => {
  let dateOptions:Intl.DateTimeFormatOptions = { dateStyle: 'medium' };
  return (new Date(date).toLocaleString('en-IN', dateOptions)).replaceAll("-", ".");
  
}
// let works = (await Astro.glob('./work/**/*.{md,mdx}'))
//               .filter(work => !work.frontmatter.draft)
//               .sort((a,b) => {
//                 let c = new Date(a.frontmatter.pubDate);
//                 let d = new Date(b.frontmatter.pubDate);
//                 return c<d ? 1 : -1;
//               });

// console.log(projects[0].frontmatter)

// let featured = await works.filter((project) => (project.frontmatter.featured == true))
---

<MainBody 
  title="Meher Chaitanya - Projects" 
  description="View my (Meher Chaitanya's) projects" 
  imageUrl="/assets/og-seo-projects.jpg"
>
  <main class="px-12 tbl:px-6 lpt:px-12 pt-32 text-base text-matty-800 dark:text-matty-100">
    <!-- <div>A window to view my work and effort</div> -->
    <div class="grid grid-cols-12">
      <div class="lpt-lg:col-span-8 lpt:col-span-9 col-span-12 py-12 grid gap-x-8 gap-y-12">
          {content.rss.channel.item.map(item => (
            <div class="flex items-center group cursor-pointer w-full">
              <a href={item.link} target="_blank" class="transition-all flex flex-col bg-light-container dark:bg-dark-primary-20 w-full">
                <div>
                  <img src={item.url} alt={item.title} class="w-full object-cover">
                </div>
                <div class="p-9">
                  <h1 class="text-light-container-headings dark:text-dark-container-headings font-semibold my-4 text-4xl">
                    {item.title}
                  </h1>
                  <div class="flex gap-x-6 text-l-ctr-txt-l dark:text-d-ctr-txt-l">
                    <div class="text-base">{printDate(item.pubDate)}</div>
                  </div>
                </div>
              </a>
            </div>
          ))}
      </div>
    </div>
  </main>
</MainBody>